<!doctype html>
<html lang="uk">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>Аналітика постів</title>
    <link rel="stylesheet" href="styles.css" />
    <link rel="icon" href="favicon.ico" type="image/x-icon">
  </head>
  <body>
    <main class="container">
      <h1>Аналітика постів Vkontakte</h1>

      <!-- Глобальні налаштування (спільні для обох вкладок) -->
      <div class="grid-2 global-controls">
        <div>
          <label for="version">API версія</label>
          <input disabled id="version" type="text" value="5.199" />
        </div>
        <div>
          <label for="batch">Розмір батчу</label>
          <input disabled id="batch" type="text" value="100" />
        </div>
      </div>

      <!-- Tabs -->
      <div class="tabs">
        <button id="tabAnalytics" class="tab active">Аналітика</button>
        <button id="tabSearch" class="tab">Пошук постів</button>
      </div>

      <!-- Аналітика -->
      <section id="analyticsSection">
        <label for="urls">Список посилань (по одному в рядку):</label>
        <textarea id="urls" class="tall" placeholder="https://vk.com/wall-12345_67890"></textarea>

        <div class="btns">
          <button id="analyze" class="primary">Зібрати метрики</button>
          <button id="export" class="secondary" disabled>Експорт Excel</button>
          <button id="analytics-clear" class="secondary">Очистити</button>
        </div>

        <p id="analyticsInfo" class="status muted">
          Важливо: застосунок не має доступу до постів, які видалені або опубліковані в закритих спільнотах.
          Посилання на такі пости будуть виділені червоним в таблиці.
        </p>

        <!-- Прогрес-бар -->
        <div id="progress" class="progress" style="display:none;">
          <div class="progress-bar"><div class="progress-fill" id="progressFill"></div></div>
          <div class="progress-text" id="progressText">0%</div>
        </div>

        <div id="status" class="status muted"></div>

        <!-- Плашка із підсумками -->
        <div class="stats" id="totals" style="display:none;">
          <div><strong>Аналітика</strong></div>
          <br>
          <div>Кількість постів: <strong class="posts">0</strong> (Недоступні: <strong class="missing">0</strong>)</div>
          <br>
          <div>Охоплення: <strong class="reach">0</strong></div>
          <div>Перегляди: <strong class="views">0</strong></div>
          <div>Коментарі: <strong class="comments">0</strong></div>
          <div>Реакції: <strong class="likes">0</strong></div>
          <div>Поширення: <strong class="reposts">0</strong></div>
        </div>

        <div id="tableWrap" class="results-box table-wrap" style="display:none;">
          <table id="table">
            <thead id="tableHead">
              <tr>
                <th>Посилання на пост</th>
                <th class="sortable" data-sort="group_members">
                  <span class="th-inner">Охоплення <span class="arrow"></span></span>
                </th>
                <th class="sortable" data-sort="views">
                  <span class="th-inner">Перегляди <span class="arrow"></span></span>
                </th>
                <th class="sortable" data-sort="comments">
                  <span class="th-inner">Коментарі <span class="arrow"></span></span>
                </th>
                <th class="sortable" data-sort="likes">
                  <span class="th-inner">Реакції <span class="arrow"></span></span>
                </th>
                <th class="sortable" data-sort="reposts">
                  <span class="th-inner">Поширення <span class="arrow"></span></span>
                </th>
              </tr>
            </thead>
            <tbody></tbody>
          </table>
        </div>
      </section>

      <!-- Пошук постів -->
      <section id="searchSection" style="display:none;">
        <label for="searchText">Текст для пошуку:</label>
        <textarea id="searchText" class="tall" placeholder="Встав сюди текст з твого поста..."></textarea>

        <div class="btns">
          <button id="searchBtn" class="primary">Шукати пости</button>
          <button id="copyLinksBtn" class="secondary" disabled>Скопіювати всі посилання</button>
          <button id="search-clear" class="secondary">Очистити</button>
        </div>

        <p id="searchInfo" class="status muted">
          Важливо: результат пошуку може включати пости, які не пов'язані з вашим матеріалом.
          Рекомендується перевіряти кожне знайдене посилання окремо.
        </p>

        <p id="searchStatus" class="status muted"></p>

        <div id="searchResultsWrap" class="results-box list-wrap" style="display:none;">
          <div class="list-head">
            Знайдено: <span id="searchCount">0</span>
          </div>
          <ol id="searchList" class="links-list"></ol>
        </div>
      </section>
    </main>

    <script type="module" src="./js/main.js"></script>
  </body>
</html>
